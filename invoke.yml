matrix:
  dist:
    ubuntu:
    - trusty
    - xenial
    # - bionic
    debian:
    - stretch
    # centos:
    # - 7
  salt:
    - stable
    - stable 2016.3
    - stable 2017.7
    - develop
    - git v2018.2
  salt-formulas:
    - stable
    - nightly

target:
  # NOTE, make sure target names don't conflict with DockerMake target names
  saltstack:
    matrix:
      - dist
      - salt
    require:
      - salt
      - wheelhouse
  wheelhouse:
    matrix:
      - dist
      - salt
      - salt-formulas
    require:
      - salt
      - salt-formulas
      - wheelhouse
  salt-formulas-reclass:
    matrix:
      - dist
      - salt
      - salt-formulas
    require:
      - reclass
  salt-formulas-saltclass:
    matrix:
      - dist
      - salt
      - salt-formulas
    require:
      - saltclass

dockermake:
  destination: 'images'
  repository:  'docker.io/epcim/salt-formulas'
  options: '--no-cache'
  # options: '--registry-user epcim'
